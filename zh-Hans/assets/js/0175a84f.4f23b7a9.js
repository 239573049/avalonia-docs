"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[96217],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),s=p(n),m=o,h=s["".concat(c,".").concat(m)]||s[m]||d[m]||i;return n?a.createElement(h,r(r({ref:t},u),{},{components:n})):a.createElement(h,r({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[s]="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7967:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const i={description:"TUTORIALS - Music Store App"},r="Button Command",l={unversionedId:"tutorials/music-store-app/button-command",id:"tutorials/music-store-app/button-command",title:"Button Command",description:"TUTORIALS - Music Store App",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/tutorials/music-store-app/button-command.md",sourceDirName:"tutorials/music-store-app",slug:"/tutorials/music-store-app/button-command",permalink:"/avalonia-docs/zh-Hans/docs/next/tutorials/music-store-app/button-command",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/tutorials/music-store-app/button-command.md",tags:[],version:"current",frontMatter:{description:"TUTORIALS - Music Store App"},sidebar:"documentationSidebar",previous:{title:"Add and Layout Controls",permalink:"/avalonia-docs/zh-Hans/docs/next/tutorials/music-store-app/add-and-layout-controls"},next:{title:"Open a Dialog",permalink:"/avalonia-docs/zh-Hans/docs/next/tutorials/music-store-app/opening-a-dialog"}},c={},p=[{value:"Reactive Command",id:"reactive-command",level:2}],u={toc:p},s="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(s,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"button-command"},"Button Command"),(0,o.kt)("p",null,"So far in this tutorial, you have altered only files from the view part of the MVVM pattern (for the main window and app). On this page you will learn how to link the button in the view for the main window, to a command in the view model. This will cause user interaction with the view (in this case a button click) to have an effect in the application logic of the view model."),(0,o.kt)("p",null,"When you are develop with ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," and the MVVM pattern, the solution template will give you a choice of MVVM toolkits. This tutorial is using the ",(0,o.kt)("em",{parentName:"p"},"ReactiveUI")," framework, and the solution template has already added the packages necessary."),(0,o.kt)("h2",{id:"reactive-command"},"Reactive Command"),(0,o.kt)("p",null,"The first step in linking the view and view model is to make the view model able to accept a command. You will achieve this by adding the .NET ",(0,o.kt)("inlineCode",{parentName:"p"},"ICommand")," interface to the main window, and then implementing it with a ",(0,o.kt)("em",{parentName:"p"},"ReactiveUI")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ReactiveCommand"),". Follow this procedure:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Stop the app if it is still running."),(0,o.kt)("li",{parentName:"ul"},"Locate and open the ",(0,o.kt)("strong",{parentName:"li"},"MainWindowViewModel.cs")," file in the ",(0,o.kt)("strong",{parentName:"li"},"/ViewModels")," folder."),(0,o.kt)("li",{parentName:"ul"},"Delete the existing content of the class, and add the code shown:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},"using ReactiveUI;\nusing System.Windows.Input;\n\nnamespace AvaloniaApplication11.ViewModels\n{\n    public class MainWindowViewModel : ViewModelBase\n    {\n        public ICommand BuyMusicCommand { get; }\n\n        public MainWindowViewModel()\n        {\n            BuyMusicCommand = ReactiveCommand.Create(() =>\n            {\n                // Code here will be executed when the button is clicked.\n            });\n        }\n    }\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Place a debug breakpoint at the open (curly) bracket just above the comment line."," ")),(0,o.kt)("p",null,"To complete the link from the view to your new ",(0,o.kt)("inlineCode",{parentName:"p"},"BuyMusicCommand")," view model property, you will add a data binding to the button."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For more information about the concept of data binding, see ",(0,o.kt)("a",{parentName:"p",href:"../../basics/data/data-binding"},"here"),"."," ")),(0,o.kt)("p",null,"To add the button data binding, follow this procedure:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Locate and open the ",(0,o.kt)("strong",{parentName:"li"},"MainWindow.axaml")," file."),(0,o.kt)("li",{parentName:"ul"},"Find the XAML for the button and add the command attribute and binding, as shown:"," ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<Button HorizontalAlignment="Right" VerticalAlignment="Top"\n        Command="{Binding BuyMusicCommand}">\n   <PathIcon Data="{StaticResource store_microsoft_regular}"/>\n</Button>\n')),(0,o.kt)("p",null,"The Command attribute of an ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," button determines what happens when the button is clicked. In this case the data binding expression links to the ",(0,o.kt)("inlineCode",{parentName:"p"},"BuyMusicCommand")," property of an underlying view model. To confirm that this is what happens:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Debug")," to compile and run the project."),(0,o.kt)("li",{parentName:"ul"},"Click the icon button.")),(0,o.kt)("p",null,"You will see the app stop executing at the breakpoint you previously set in the view model."),(0,o.kt)("p",null,"On the next page, you will create a new dialog window, and then add some code to display it (where the breakpoint currently is in the view model)."))}d.isMDXComponent=!0}}]);