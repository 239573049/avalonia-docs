"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[93035],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},y="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,s=e.originalType,i=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),y=p(n),h=l,m=y["".concat(i,".").concat(h)]||y[h]||d[h]||s;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var s=n.length,o=new Array(s);o[0]=h;var r={};for(var i in t)hasOwnProperty.call(t,i)&&(r[i]=t[i]);r.originalType=e,r[y]="string"==typeof e?e:l,o[1]=r;for(var p=2;p<s;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},31703:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>p});var a=n(87462),l=(n(67294),n(3905));const s={id:"styles",title:"Styles"},o="Styles",r={unversionedId:"basics/user-interface/styling/styles",id:"basics/user-interface/styling/styles",title:"Styles",description:"The Avalonia UI style system is a mechanism that can share property settings between controls.",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/basics/user-interface/styling/styles.md",sourceDirName:"basics/user-interface/styling",slug:"/basics/user-interface/styling/styles",permalink:"/avalonia-docs/zh-Hans/docs/next/basics/user-interface/styling/styles",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/basics/user-interface/styling/styles.md",tags:[],version:"current",frontMatter:{id:"styles",title:"Styles"},sidebar:"documentationSidebar",previous:{title:"Styling",permalink:"/avalonia-docs/zh-Hans/docs/next/basics/user-interface/styling/"},next:{title:"Style Classes",permalink:"/avalonia-docs/zh-Hans/docs/next/basics/user-interface/styling/style-classes"}},i={},p=[{value:"How It Works",id:"how-it-works",level:2},{value:"How it is Written",id:"how-it-is-written",level:2},{value:"Example",id:"example",level:2},{value:"Where to put Styles",id:"where-to-put-styles",level:2},{value:"The Selector",id:"the-selector",level:2},{value:"Setters",id:"setters",level:2},{value:"Nested Styles",id:"nested-styles",level:2},{value:"Style Key",id:"style-key",level:2},{value:"Styles and Resources",id:"styles-and-resources",level:2},{value:"Further Information",id:"further-information",level:2}],c={toc:p},y="wrapper";function d(e){let{components:t,...n}=e;return(0,l.kt)(y,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"styles"},"Styles"),(0,l.kt)("p",null,"The ",(0,l.kt)("em",{parentName:"p"},"Avalonia UI")," style system is a mechanism that can share property settings between controls. "),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"A ",(0,l.kt)("inlineCode",{parentName:"p"},"Style")," in Avalonia is more similar to a CSS style than a WPF/UWP style. The equivalent of a WPF/UWP Style in Avalonia is a ",(0,l.kt)("a",{parentName:"p",href:"control-themes"},(0,l.kt)("inlineCode",{parentName:"a"},"ControlTheme")),".")),(0,l.kt)("h2",{id:"how-it-works"},"How It Works"),(0,l.kt)("p",null,"In essence, the styling mechanism has two steps: selection and substitution. The XAML for the style can define how both of these steps are to be done, but often you will help the selection step by defining 'class' labels on control elements."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"The ",(0,l.kt)("em",{parentName:"p"},"Avalonia UI")," styling system's use of 'class' labels on control elements is analogous to how CSS (cascading style sheets) work with HTML elements."," ")),(0,l.kt)("p",null,"The styling system implements cascading styles by searching the ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/concepts/control-trees"},"logical tree")," upwards from a control, during the selection step. This means styles defined at the highest level of the application (the ",(0,l.kt)("inlineCode",{parentName:"p"},"App.axaml")," file) can be used anywhere in an application, but may still be overridden closer to a control (for example in a window, or user control)."),(0,l.kt)("p",null,"When a match is located by the selection step, then the matched control's properties are altered according to the setters in the style."),(0,l.kt)("h2",{id:"how-it-is-written"},"How it is Written"),(0,l.kt)("p",null,"The XAML for a style has two parts: a selector attribute, and one or more setter elements. The selector value contains a string that uses the ",(0,l.kt)("em",{parentName:"p"},"Avalonia UI")," ",(0,l.kt)("strong",{parentName:"p"},"style selector syntax"),". Each setter element identifies the property that will be changed by name, and the new value that will be substituted. The pattern is like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'<Style Selector="selector syntax">\n     <Setter Property="property name" Value="new value"/>\n     ...\n</Style>\n')),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"The ",(0,l.kt)("em",{parentName:"p"},"Avalonia UI")," ",(0,l.kt)("strong",{parentName:"p"},"style selector syntax")," is analogous to that used by CSS (cascading style sheets). For detailed reference information, see ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/reference/styles/style-selector-syntax"},"here"),". "," ")),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)("p",null,"This is an example of how a style is written and applied to a control element, with a ",(0,l.kt)("a",{parentName:"p",href:"style-classes"},"style class")," to help selection:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<Window ... >\n    <Window.Styles>\n        <Style Selector="TextBlock.h1">\n            <Setter Property="FontSize" Value="24"/>\n            <Setter Property="FontWeight" Value="Bold"/>\n        </Style>\n    </Window.Styles>\n    <StackPanel Margin="20">\n       <TextBlock Classes="h1">Heading 1</TextBlock>\n    </StackPanel>\n</Window>\n')),(0,l.kt)("p",null,"In this example, all ",(0,l.kt)("inlineCode",{parentName:"p"},"TextBlock")," elements with the ",(0,l.kt)("inlineCode",{parentName:"p"},"h1")," style class will be displayed with the font size and weight set by the style. This works in the preview pane:"),(0,l.kt)("img",{src:"/img/gitbook-import/assets/image (5) (5).png",alt:""}),(0,l.kt)("h2",{id:"where-to-put-styles"},"Where to put Styles"),(0,l.kt)("p",null,"Styles are placed inside a ",(0,l.kt)("inlineCode",{parentName:"p"},"Styles")," collection element on a ",(0,l.kt)("inlineCode",{parentName:"p"},"Control")," or on the ",(0,l.kt)("inlineCode",{parentName:"p"},"Application"),". For example, a window styles collection looks like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<Window.Styles>\n   <Style> ...  </Style>\n</Window.Styles>\n")),(0,l.kt)("p",null,"The location of a styles collection defines the scope of the styles it contains. In the above example, the styles will apply to the window and all of its contents. If a style is added to the ",(0,l.kt)("inlineCode",{parentName:"p"},"Application")," then it will apply globally."),(0,l.kt)("h2",{id:"the-selector"},"The Selector"),(0,l.kt)("p",null,"The style selector defines what controls the style will act upon. The selector uses a variety of formats, one of the simplest is this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<Style Selector="TargetControlClass.styleClassName">\n')),(0,l.kt)("p",null,"This selector will match all controls with a style key of ",(0,l.kt)("inlineCode",{parentName:"p"},"TargetControlClass"),", having a style class of ",(0,l.kt)("inlineCode",{parentName:"p"},"styleClassName"),"."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"A full list of selectors can be found ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/reference/styles/style-selector-syntax"},"here"),".")),(0,l.kt)("h2",{id:"setters"},"Setters"),(0,l.kt)("p",null,"Setters describe what will happen when the selector matches a control. They are simple property/value pairs written in the format:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<Setter Property="FontSize" Value="24"/>\n<Setter Property="Padding" Value="4 2 0 4"/>\n')),(0,l.kt)("p",null,"Whenever a style is matched with a control, all of the setters within the style will be applied to the control."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"For more information on setters see ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/guides/styles-and-resources/property-setters"},"here"),".")),(0,l.kt)("h2",{id:"nested-styles"},"Nested Styles"),(0,l.kt)("p",null,"Styles can be nested in other styles. To nest a style, simply include the child style as a child of the parent ",(0,l.kt)("inlineCode",{parentName:"p"},"<Style>")," element, and start the selector with the ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/reference/styles/style-selector-syntax#nesting"},(0,l.kt)("inlineCode",{parentName:"a"},"Nesting Selector (^)")),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<Style Selector="TextBlock.h1">\n    <Setter Property="FontSize" Value="24"/>\n    <Setter Property="FontWeight" Value="Bold"/>\n    \n    // highlight-start\n    <Style Selector="^:pointerover">\n        <Setter Property="Foreground" Value="Red"/>\n    </Style>\n    // highlight-end\n</Style>\n')),(0,l.kt)("p",null,"When this happens, the selector from the parent style will automatically apply to the child style. In the above example the nested style will effectively have a selector of ",(0,l.kt)("inlineCode",{parentName:"p"},"TextBlock.h1:pointerover"),", meaning that it will display with a red foreground when the pointer is over the control."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"The nesting selector must be present and must appear at the start of the child selector.")),(0,l.kt)("h2",{id:"style-key"},"Style Key"),(0,l.kt)("p",null,"The type of an object matched by a style selector is not determined by the concrete type of the control, but rather by examining its ",(0,l.kt)("inlineCode",{parentName:"p"},"StyleKey")," property."),(0,l.kt)("p",null,"By default, the ",(0,l.kt)("inlineCode",{parentName:"p"},"StyleKey "),"property returns the type of the current instance. However, if you want your control, which inherits from Button, to be styled as a Button, you can override the ",(0,l.kt)("inlineCode",{parentName:"p"},"StyleKeyOverride")," property in your class and have it return ",(0,l.kt)("inlineCode",{parentName:"p"},"typeof(Button)"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"public class MyButton : Button\n{\n    // `MyButton` will be styled as a standard `Button` control.\n    protected override Type StyleKeyOverride => typeof(Button);\n}\n")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Note this this logic is inverted as compared with WPF/UWP: in those frameworks, when you derive a new control it will be styled as its base control unless you override the ",(0,l.kt)("inlineCode",{parentName:"p"},"DefaultStyleKey")," property. In Avalonia the control will be styled using its concrete type unless a different style key is provided.")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Before Avalonia 11, the style key was overridden by implementing ",(0,l.kt)("inlineCode",{parentName:"p"},"IStyleable")," and providing a new implementation of the ",(0,l.kt)("inlineCode",{parentName:"p"},"IStyleable.StyleKey")," property. This mechanism is still supported in Avalonia 11 for compatibility, but may be removed in a future version.")),(0,l.kt)("h2",{id:"styles-and-resources"},"Styles and Resources"),(0,l.kt)("p",null,"Resources are often used with styles to help maintain consistent presentation. Resources can help define standard colors and icons in an application; or across multiple applications when included from separate files."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"For guidance on how to use resources in you application, see ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/guides/styles-and-resources/resources"},"here"),".")),(0,l.kt)("h2",{id:"further-information"},"Further Information"),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"For guidance on how to share styles by including a styles file, see ",(0,l.kt)("a",{parentName:"p",href:"/avalonia-docs/zh-Hans/docs/next/guides/styles-and-resources/how-to-use-included-styles"},"here"),".")))}d.isMDXComponent=!0}}]);