"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[86765],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),h=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=h(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=h(n),u=i,f=c["".concat(l,".").concat(u)]||c[u]||d[u]||a;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,o[1]=s;for(var h=2;h<a;h++)o[h]=n[h];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},44926:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>h});var r=n(87462),i=(n(67294),n(3905));const a={description:"REFERENCE - Built-in Controls"},o="Refresh Container",s={unversionedId:"reference/controls/refreshcontainer",id:"reference/controls/refreshcontainer",title:"Refresh Container",description:"REFERENCE - Built-in Controls",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/reference/controls/refreshcontainer.md",sourceDirName:"reference/controls",slug:"/reference/controls/refreshcontainer",permalink:"/avalonia-docs/zh-Hans/docs/next/reference/controls/refreshcontainer",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/reference/controls/refreshcontainer.md",tags:[],version:"current",frontMatter:{description:"REFERENCE - Built-in Controls"},sidebar:"documentationSidebar",previous:{title:"Progress Bar",permalink:"/avalonia-docs/zh-Hans/docs/next/reference/controls/progressbar"},next:{title:"Relative Panel",permalink:"/avalonia-docs/zh-Hans/docs/next/reference/controls/relativepanel"}},l={},h=[{value:"Example",id:"example",level:2},{value:"Refreshing",id:"refreshing",level:2},{value:"More Information",id:"more-information",level:2}],p={toc:h},c="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"refresh-container"},"Refresh Container"),(0,i.kt)("p",null,"The refresh container allows a user to pull down on content or a list of data to refresh the content or retrieve more data. The refresh progress is indicated by a ",(0,i.kt)("inlineCode",{parentName:"p"},"RefreshVisualizer")," that appears from the edge by which the pull gesture was initiated. The content of a ",(0,i.kt)("inlineCode",{parentName:"p"},"RefreshContainer")," must be a ",(0,i.kt)("inlineCode",{parentName:"p"},"ScrollViewer"),", or a control that has one."),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"This example shows hows to use a RefreshContainer with a"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"In the axaml file.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-markup"},'<RefreshContainer PullDirection="TopToBottom"\n                RefreshRequested="RefreshContainerPage_RefreshRequested">\n    <ListBox ItemsSource="{Binding Items}"/>\n</RefreshContainer>\n')),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"In the class file.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},"private void RefreshContainerPage_RefreshRequested(object? sender, RefreshRequestedEventArgs e)\n{\n    // Retrieve a deferral object.\n    var deferral = e.GetDeferral();\n\n    // Refresh List Box Items\n\n    // Notify the Refresh Container that the refresh is complete.\n    deferral.Complete();\n}\n")),(0,i.kt)("h2",{id:"refreshing"},"Refreshing"),(0,i.kt)("p",null,"A refresh can be initiated by pulling in the direction specified by the ",(0,i.kt)("inlineCode",{parentName:"p"},"PullDirection")," property to the full extent of the visualizer, or by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"RequestRefresh")," method on the RefreshContainer. The progress of the refresh is indicated by the ",(0,i.kt)("inlineCode",{parentName:"p"},"RefreshVisualizerState")," of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Visualizer"),", which can be in any of the following;"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"idle"},"Idle"),(0,i.kt)("p",{parentName:"li"},"This is the default state of the visualizer. The user is not interacting with the container, and no refresh is in progress. The visualizer is hidden.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"interacting"},"Interacting"),(0,i.kt)("p",{parentName:"li"},"The user is pulling in the direction specified in the ",(0,i.kt)("inlineCode",{parentName:"p"},"PullDirection")," property, but has not reached the pull threshold. The visualizer gradually becomes visible until the pull threshold is reached.\nIf the pull is releaseed before reaching the pull threshold, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Visualizer")," returns to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Idle")," state, and no refresh is initiated.\nIf the pull threshold is reached, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Visualizer")," enters the ",(0,i.kt)("inlineCode",{parentName:"p"},"Pending")," state.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"pending"},"Pending"),(0,i.kt)("p",{parentName:"li"},"The user has pulled past the pull threshold. In this state, the visualizer is fully visible. If the user moves the contact back to before the pull threshold, the visualizer returns to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Interacting")," state. If the user releases contact while in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Pending")," state, the visualizer enters the ",(0,i.kt)("inlineCode",{parentName:"p"},"Refreshing")," state.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"refreshing-1"},"Refreshing"),(0,i.kt)("p",{parentName:"li"},"The user has released the touch contact while the visualizer is in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Pending")," state. The ",(0,i.kt)("inlineCode",{parentName:"p"},"RefreshRequested")," event is raised. The event args contains a ",(0,i.kt)("inlineCode",{parentName:"p"},"Deferral")," object. This object is used to notify the Refresh Container that the refresh action has completed, and should be used in long refreshes without blocking the UI thread. If not retrieved, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Refreshing")," state ends when the ",(0,i.kt)("inlineCode",{parentName:"p"},"RefreshRequested")," invocation is complete.\nIn this state, the visualizer is fully visible, and the refresh animation begins.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"peeking"},"Peeking"),(0,i.kt)("p",{parentName:"li"},"This occurs when the user starts a pull gesture while the content is in a position where refresh is not allowed. This typical happens when the child ScrollViewer isn't at Offset 0, with respect to the pull direction and scroll direction, when the pull is started. The visualizer is hidden and the visualizer's state can only progress to ",(0,i.kt)("inlineCode",{parentName:"p"},"Idle")," when the pull is released."))),(0,i.kt)("h2",{id:"more-information"},"More Information"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"View the source code on GitHub ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AvaloniaUI/Avalonia/blob/master/src/Avalonia.Controls/PullToRefresh/RefreshContainer.cs"},(0,i.kt)("inlineCode",{parentName:"a"},"RefreshContainer.cs")))))}d.isMDXComponent=!0}}]);