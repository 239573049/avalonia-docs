"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[96614],{3905:(t,e,n)=>{n.d(e,{Zo:()=>d,kt:()=>g});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var l=a.createContext({}),c=function(t){var e=a.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},d=function(t){var e=c(t.components);return a.createElement(l.Provider,{value:e},t.children)},p="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,l=t.parentName,d=s(t,["components","mdxType","originalType","parentName"]),p=c(n),u=i,g=p["".concat(l,".").concat(u)]||p[u]||m[u]||o;return n?a.createElement(g,r(r({ref:e},d),{},{components:n})):a.createElement(g,r({ref:e},d))}));function g(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[p]="string"==typeof t?t:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},29264:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(87462),i=(n(67294),n(3905));const o={description:"CONCEPTS"},r="Data Context",s={unversionedId:"basics/data/data-binding/data-context",id:"basics/data/data-binding/data-context",title:"Data Context",description:"CONCEPTS",source:"@site/docs/basics/data/data-binding/data-context.md",sourceDirName:"basics/data/data-binding",slug:"/basics/data/data-binding/data-context",permalink:"/avalonia-docs/docs/next/basics/data/data-binding/data-context",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/basics/data/data-binding/data-context.md",tags:[],version:"current",frontMatter:{description:"CONCEPTS"},sidebar:"documentationSidebar",previous:{title:"Data Binding",permalink:"/avalonia-docs/docs/next/basics/data/data-binding/"},next:{title:"Data Binding Syntax",permalink:"/avalonia-docs/docs/next/basics/data/data-binding/data-binding-syntax"}},l={},c=[{value:"Example",id:"example",level:2},{value:"Design Data Context",id:"design-data-context",level:2}],d={toc:c},p="wrapper";function m(t){let{components:e,...n}=t;return(0,i.kt)(p,(0,a.Z)({},d,n,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"data-context"},"Data Context"),(0,i.kt)("p",null,"When Avalonia performs data binding, it has to locate an application object to bind to. This location is represented by a ",(0,i.kt)("strong",{parentName:"p"},"Data Context"),"."),(0,i.kt)("img",{src:"/img/gitbook-import/assets/image (56).png",alt:""}),(0,i.kt)("p",null,"Every control in Avalonia has a property called ",(0,i.kt)("inlineCode",{parentName:"p"},"DataContext"),", and this includes built-in controls, user controls and windows."," "),(0,i.kt)("p",null,"When binding, Avalonia performs a hierarchical search of the logical control tree, starting with the control where the binding is defined, until it finds a data context to use."," "),(0,i.kt)("img",{src:"/img/gitbook-import/assets/image (62).png",alt:""}),(0,i.kt)("p",null,"This means that a control defined in a window can use the data context of the window; or (as above) a control in a control in a window can use the window's data context."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"For information about the control trees in Avalonia, and how to see them at run-time, see ",(0,i.kt)("a",{parentName:"p",href:"../../../concepts/control-trees"},"here"),".")),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"You can see the window's data context being set if you create a new project using the ",(0,i.kt)("em",{parentName:"p"},"Avalonia MVVM Application")," template. Locate and open the ",(0,i.kt)("strong",{parentName:"p"},"App.axaml.cs")," file to see the code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},"public override void OnFrameworkInitializationCompleted()\n{\n    if (ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktop)\n    {\n        desktop.MainWindow = new MainWindow\n        {\n            DataContext = new MainWindowViewModel(),\n        };\n    }\n\n    base.OnFrameworkInitializationCompleted();\n}\n")),(0,i.kt)("p",null,"You can trace the object being set to the window's data context in the file ",(0,i.kt)("strong",{parentName:"p"},"MainWindowViewModel.cs"),". The code looks like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'public class MainWindowViewModel : ViewModelBase\n{\n    public string Greeting => "Welcome to Avalonia!";\n}\n')),(0,i.kt)("p",null,"In the main window file ",(0,i.kt)("strong",{parentName:"p"},"MainWindow.axaml")," you can see that the window content zone is comprised a text block that has its text property bound to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Greeting")," property."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<Window xmlns="https://github.com/avaloniaui"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        xmlns:vm="using:AvaloniaMVVMApplication2.ViewModels"\n        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\n        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"\n        x:Class="AvaloniaMVVMApplication2.Views.MainWindow"\n        Icon="/Assets/avalonia-logo.ico"\n        Title="AvaloniaMVVMApplication2">\n\n    <Design.DataContext>\n        <vm:MainWindowViewModel/>\n    </Design.DataContext>\n\n    <TextBlock Text="{Binding Greeting}" HorizontalAlignment="Center" VerticalAlignment="Center"/>\n\n</Window>\n')),(0,i.kt)("p",null,"When the project runs, the data binder searches up the logical control tree from the text block and finds a data context set at the main window level. So the bound text appears as:"),(0,i.kt)("img",{src:"/img/gitbook-import/assets/image (20) (2).png",alt:""}),(0,i.kt)("h2",{id:"design-data-context"},"Design Data Context"),(0,i.kt)("p",null,"You may have noticed, after you first compiled this project, that the preview pane also shows the greeting."),(0,i.kt)("img",{src:"/img/gitbook-import/assets/image (40) (1).png",alt:""}),(0,i.kt)("p",null,"This is because Avalonia can also set a data context for a control for use at design-time. You will find this useful because it means that the preview pane can show some realistic data while you adjust layout and styles."),(0,i.kt)("p",null,"You can see the design-time data context being set in the XAML:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<Design.DataContext>\n    <vm:MainWindowViewModel/>\n</Design.DataContext>\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"For a more detailed guide about using the design-time data context, see ",(0,i.kt)("a",{parentName:"p",href:"/avalonia-docs/docs/next/guides/implementation-guides/how-to-use-design-time-data"},"here"),".")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Further discussion of data binding requires you to have a background in the MVVM pattern of programming. For an introduction to the concepts of the MVVM pattern, see ",(0,i.kt)("a",{parentName:"p",href:"../../../concepts/the-mvvm-pattern"},"here"),".")),(0,i.kt)("p",null,"Further Information"),(0,i.kt)("p",null,"Bind to Commands"))}m.isMDXComponent=!0}}]);